<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Karten – Übersicht</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="max-w-6xl mx-auto px-4 py-6">
    <h1 class="text-3xl font-bold">Karten</h1>
    <p class="text-sm text-slate-500 mt-2">Quelle: <code>/api/mocks/cards_page_1.json</code></p>
  </header>

  <main id="app" class="max-w-6xl mx-auto px-4 pb-16">
    <div id="status" class="text-slate-500">Lade…</div>
    <div id="grid" class="mt-6 grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div>
  </main>

  <script>
    const STATUS = document.getElementById('status');
    const GRID = document.getElementById('grid');

    async function load() {
      try {
        const res = await fetch('/api/mocks/cards_page_1.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const data = await res.json();

        STATUS.remove();

        (data.items || []).forEach(card => {
          const a = document.createElement('a');
          a.href = 'detail.html?id=' + encodeURIComponent(card.id);
          a.className = 'block rounded-xl bg-white p-4 shadow hover:shadow-md border border-slate-200 transition';
          a.innerHTML = `
            <div class="text-lg font-semibold mb-1">${card.player}</div>
            <div class="text-sm text-slate-500 mb-2">${card.franchise}</div>
            <dl class="text-sm space-y-1">
              <div class="flex gap-2"><dt class="text-slate-500 w-24">ID</dt><dd>${card.id}</dd></div>
              <div class="flex gap-2"><dt class="text-slate-500 w-24">Variante</dt><dd>${card.variant ?? '—'}</dd></div>
              <div class="flex gap-2"><dt class="text-slate-500 w-24">Seltenheit</dt><dd>${card.rarity ?? '—'}</dd></div>
            </dl>
          `;
          GRID.appendChild(a);
        });

        if (!GRID.children.length) {
          GRID.innerHTML = '<div class="text-slate-500">Keine Karten gefunden.</div>';
        }
      } catch (err) {
        STATUS.textContent = 'Fehler beim Laden.';
        console.error(err);
      }
    }
    load();
  </script>
</body>
</html>
